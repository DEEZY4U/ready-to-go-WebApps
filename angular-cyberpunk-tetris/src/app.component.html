<div class="min-h-screen w-full flex flex-col items-center justify-center p-4 sm:p-8 bg-gradient-to-b from-slate-900 to-indigo-950">
  <header class="mb-12 text-center">
    <h1 class="text-5xl md:text-7xl font-bold text-cyan-400 font-press-start drop-shadow-[0_0_10px_theme(colors.cyan.400)]">
      TETRIS
    </h1>
    <p class="text-fuchsia-400">CYBERPUNK EDITION</p>
  </header>

  <main class="flex flex-col md:flex-row gap-8 md:gap-12 items-start">
    <!-- Left Panel -->
    <div class="w-64 hidden md:flex flex-col gap-4">
      <div class="p-4 bg-black/50 border border-fuchsia-500 rounded-md shadow-[0_0_10px_theme(colors.fuchsia.500)]">
        <h2 class="font-bold text-lg text-fuchsia-400 mb-2 tracking-widest">SCORE</h2>
        <p class="font-press-start text-2xl text-yellow-300">{{ gameService.score() }}</p>
      </div>
       <div class="p-4 bg-black/50 border border-fuchsia-500 rounded-md shadow-[0_0_10px_theme(colors.fuchsia.500)]">
        <h2 class="font-bold text-lg text-fuchsia-400 mb-2 tracking-widest">LEVEL</h2>
        <p class="font-press-start text-2xl text-yellow-300">{{ gameService.level() }}</p>
      </div>
       <div class="p-4 bg-black/50 border border-fuchsia-500 rounded-md shadow-[0_0_10px_theme(colors.fuchsia.500)]">
        <h2 class="font-bold text-lg text-fuchsia-400 mb-2 tracking-widest">LINES</h2>
        <p class="font-press-start text-2xl text-yellow-300">{{ gameService.linesCleared() }}</p>
      </div>
    </div>

    <!-- Game Board -->
    <div class="relative">
      <app-game-board></app-game-board>

      @if (!gameService.currentPiece()) {
        <div class="absolute inset-0 bg-black/80 flex flex-col items-center justify-center text-center p-4 z-10 border-2 border-fuchsia-500 shadow-[0_0_20px_theme(colors.fuchsia.500)]">
          <h2 class="text-4xl font-bold text-cyan-400 mb-4 font-press-start">Get Ready</h2>
          <button (click)="startGame()" class="px-6 py-3 bg-fuchsia-600 text-white font-bold rounded hover:bg-fuchsia-500 transition-all duration-300 shadow-[0_0_15px_theme(colors.fuchsia.500)] font-press-start text-sm">
            START GAME
          </button>
        </div>
      }
      
      @if (gameService.isGameOver()) {
        <div class="absolute inset-0 bg-black/80 flex flex-col items-center justify-center text-center p-4 z-10 border-2 border-red-500 shadow-[0_0_20px_theme(colors.red.500)]">
          <h2 class="text-4xl font-bold text-red-500 mb-4 font-press-start">GAME OVER</h2>
          <p class="text-lg mb-6">Score: {{ gameService.score() }}</p>
          <button (click)="startGame()" class="px-6 py-3 bg-cyan-600 text-white font-bold rounded hover:bg-cyan-500 transition-all duration-300 shadow-[0_0_15px_theme(colors.cyan.500)] font-press-start text-sm">
            RESTART
          </button>
        </div>
      }

      @if (gameService.isPaused() && !gameService.isGameOver()) {
        <div class="absolute inset-0 bg-black/80 flex flex-col items-center justify-center text-center p-4 z-10 border-2 border-yellow-400 shadow-[0_0_20px_theme(colors.yellow.400)]">
          <h2 class="text-4xl font-bold text-yellow-400 mb-4 font-press-start">PAUSED</h2>
          <p class="text-lg">Press 'P' to resume</p>
        </div>
      }
    </div>

    <!-- Right Panel -->
    <div class="w-full md:w-64 flex flex-col gap-4">
      <div class="p-4 bg-black/50 border border-cyan-400 rounded-md shadow-[0_0_10px_theme(colors.cyan.400)]">
        <h2 class="font-bold text-lg text-cyan-400 mb-2 tracking-widest">NEXT</h2>
        <div class="grid grid-cols-4 grid-rows-4 gap-px w-32 h-32 mx-auto bg-slate-900/60 p-1">
          @for(row of nextPieceGrid(); track $index) {
            @for(cell of row; track $index) {
              <div class="w-full aspect-square" [class]="cell"></div>
            }
          }
        </div>
      </div>
      <div class="p-4 bg-black/50 border border-cyan-400 rounded-md shadow-[0_0_10px_theme(colors.cyan.400)]">
        <h2 class="font-bold text-lg text-cyan-400 mb-2 tracking-widest">CONTROLS</h2>
        <ul class="text-sm space-y-1">
            <li><span class="font-bold text-fuchsia-400 w-12 inline-block">&#8592; &#8594;</span> Move</li>
            <li><span class="font-bold text-fuchsia-400 w-12 inline-block">&#8593;</span> Rotate</li>
            <li><span class="font-bold text-fuchsia-400 w-12 inline-block">&#8595;</span> Soft Drop</li>
            <li><span class="font-bold text-fuchsia-400 w-12 inline-block">SPACE</span> Hard Drop</li>
            <li><span class="font-bold text-fuchsia-400 w-12 inline-block">P</span> Pause</li>
        </ul>
      </div>
    </div>
  </main>

   <!-- Mobile Stats Display -->
    <div class="md:hidden mt-8 grid grid-cols-3 gap-4 w-full max-w-sm">
      <div class="p-2 text-center bg-black/50 border border-fuchsia-500 rounded-md shadow-[0_0_10px_theme(colors.fuchsia.500)]">
        <h2 class="font-bold text-xs text-fuchsia-400 tracking-widest">SCORE</h2>
        <p class="font-press-start text-lg text-yellow-300">{{ gameService.score() }}</p>
      </div>
       <div class="p-2 text-center bg-black/50 border border-fuchsia-500 rounded-md shadow-[0_0_10px_theme(colors.fuchsia.500)]">
        <h2 class="font-bold text-xs text-fuchsia-400 tracking-widest">LEVEL</h2>
        <p class="font-press-start text-lg text-yellow-300">{{ gameService.level() }}</p>
      </div>
       <div class="p-2 text-center bg-black/50 border border-fuchsia-500 rounded-md shadow-[0_0_10px_theme(colors.fuchsia.500)]">
        <h2 class="font-bold text-xs text-fuchsia-400 tracking-widest">LINES</h2>
        <p class="font-press-start text-lg text-yellow-300">{{ gameService.linesCleared() }}</p>
      </div>
    </div>

    <!-- Mobile Controls -->
    <div class="md:hidden mt-8 w-full max-w-sm flex justify-between items-center">
      <!-- Left side: D-Pad -->
      <div class="grid grid-cols-3 grid-rows-2 gap-2 w-40">
        <div class="col-start-2 flex justify-center">
            <button (click)="gameService.rotate()" class="w-12 h-12 rounded bg-cyan-600/80 text-white font-bold text-2xl flex items-center justify-center shadow-[0_0_15px_theme(colors.cyan.500)] active:bg-cyan-500">&#8635;</button>
        </div>
        <button (click)="gameService.moveLeft()" class="w-12 h-12 rounded bg-cyan-600/80 text-white font-bold text-2xl flex items-center justify-center shadow-[0_0_15px_theme(colors.cyan.500)] active:bg-cyan-500">&#8592;</button>
        <button (click)="gameService.softDrop()" class="w-12 h-12 rounded bg-cyan-600/80 text-white font-bold text-2xl flex items-center justify-center shadow-[0_0_15px_theme(colors.cyan.500)] active:bg-cyan-500">&#8595;</button>
        <button (click)="gameService.moveRight()" class="w-12 h-12 rounded bg-cyan-600/80 text-white font-bold text-2xl flex items-center justify-center shadow-[0_0_15px_theme(colors.cyan.500)] active:bg-cyan-500">&#8594;</button>
      </div>
      <!-- Right side: Hard Drop -->
      <button (click)="gameService.hardDrop()" class="w-32 h-32 rounded-full bg-fuchsia-600/80 text-white font-press-start text-sm flex text-center items-center justify-center leading-tight shadow-[0_0_15px_theme(colors.fuchsia.500)] active:bg-fuchsia-500">HARD<br/>DROP</button>
    </div>
</div>